import{d as G,A as Fe,B as le,o as N,f as T,j as P,g as E,w as A,F as Ie,h as R,v as ce,k as q,C as He,D as Me,H as Je,a as We,J as ze}from"./vendor.a40d499b.js";const de={API_HOST:"http://localhost:5000"},Ve=R(" Close Path "),Xe=R(" Specify queue area "),Ye=R(" Specify finish area "),Ke=R(" Reset "),Ge=R(" Confirm "),Qe=P("div",null,[P("canvas",{id:"firstFrameCanvas"})],-1),Ze=G({props:{videoSrc:null,videoUid:null},setup(r){const e=r;let t,i,n,a=!1,u=!1,o=!1,l,h,s;const c=[],p=[];let d,C=!0;async function U(){const v={finishAreaPoints:p,queueAreaPoints:c,videoUid:e.videoUid},O=await(await fetch(`${de.API_HOST}/params`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(v)})).json();console.log(O)}function f(){if(t==="queueArea"){if(c.length<=2){alert("Must be a polygon.");return}u=!0}else{if(p.length<=2){alert("Must be a polygon.");return}o=!0}_(),w(p,!0,"aqua"),w(c,!0,"blue"),a=!1}function b(v){t==="queueArea"&&u||t==="finishArea"&&o||(l=v.clientX-s.left,h=v.clientY-s.top,a=!0,t==="queueArea"?c.push([l,h]):p.push([l,h]),C=!0)}function m(v){a&&(_(),t==="queueArea"?(w(p,!0,"aqua"),w(c,!1,"blue")):(w(c,!0,"blue"),w(p,!1,"aqua")),l=v.clientX-s.left,h=v.clientY-s.top,n.lineTo(l,h),n.stroke())}function w(v,F,O){if(!(v.length<1)){n.strokeStyle=O,n.beginPath(),n.moveTo(v[0][0],v[0][1]);for(let K=1;K<v.length;K++){const[je,De]=v[K];n.lineTo(je,De)}F&&(n.closePath(),n.stroke())}}function _(){n.clearRect(0,0,i.width,i.height),n.drawImage(d,0,0,i.width,i.height)}Fe(()=>e.videoSrc,(v,F)=>{d.src=v}),le(()=>{i=document.getElementById("firstFrameCanvas"),n=i.getContext("2d"),d=document.createElement("video"),d.muted=!0,window.onresize=function(){j(window.innerWidth)},d.onloadeddata=function(){d.play(),d.pause(),j(window.innerWidth),i.addEventListener("mousedown",b,!1),i.addEventListener("mousemove",m,!1)}});function j(v){d.width=v/3,d.height=d.width*d.videoHeight/d.videoWidth,i.height=d.height,i.width=d.width,s=i.getBoundingClientRect(),n.lineWidth=2}function ke(){t="queueArea",C&&(_(),w(p,!0,"aqua"),w(c,!0,"blue"),n.strokeStyle="blue",C=!1)}function Be(){t="finishArea",C&&(_(),w(p,!0,"aqua"),w(c,!0,"blue"),n.strokeStyle="aqua",C=!1)}function Le(){p.length=0,c.length=0,u=!1,o=!1,a=!1,C=!0,_()}return(v,F)=>{const O=ce;return N(),T(Ie,null,[P("div",null,[E(O,{onClick:f},{default:A(()=>[Ve]),_:1}),E(O,{type:"primary",round:"",onClick:ke},{default:A(()=>[Xe]),_:1}),E(O,{type:"primary",round:"",onClick:Be},{default:A(()=>[Ye]),_:1}),E(O,{type:"primary",round:"",onClick:Le},{default:A(()=>[Ke]),_:1}),E(O,{type:"primary",round:"",onClick:U},{default:A(()=>[Ge]),_:1})]),Qe],64)}}});var Q={exports:{}},fe=function(e,t){return function(){for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];return e.apply(t,n)}},et=fe,$=Object.prototype.toString;function Z(r){return Array.isArray(r)}function ee(r){return typeof r=="undefined"}function tt(r){return r!==null&&!ee(r)&&r.constructor!==null&&!ee(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function he(r){return $.call(r)==="[object ArrayBuffer]"}function rt(r){return $.call(r)==="[object FormData]"}function nt(r){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&he(r.buffer),e}function it(r){return typeof r=="string"}function at(r){return typeof r=="number"}function pe(r){return r!==null&&typeof r=="object"}function I(r){if($.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function st(r){return $.call(r)==="[object Date]"}function ot(r){return $.call(r)==="[object File]"}function ut(r){return $.call(r)==="[object Blob]"}function ve(r){return $.call(r)==="[object Function]"}function lt(r){return pe(r)&&ve(r.pipe)}function ct(r){return $.call(r)==="[object URLSearchParams]"}function dt(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function ft(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function te(r,e){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),Z(r))for(var t=0,i=r.length;t<i;t++)e.call(null,r[t],t,r);else for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.call(null,r[n],n,r)}function re(){var r={};function e(n,a){I(r[a])&&I(n)?r[a]=re(r[a],n):I(n)?r[a]=re({},n):Z(n)?r[a]=n.slice():r[a]=n}for(var t=0,i=arguments.length;t<i;t++)te(arguments[t],e);return r}function ht(r,e,t){return te(e,function(n,a){t&&typeof n=="function"?r[a]=et(n,t):r[a]=n}),r}function pt(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var g={isArray:Z,isArrayBuffer:he,isBuffer:tt,isFormData:rt,isArrayBufferView:nt,isString:it,isNumber:at,isObject:pe,isPlainObject:I,isUndefined:ee,isDate:st,isFile:ot,isBlob:ut,isFunction:ve,isStream:lt,isURLSearchParams:ct,isStandardBrowserEnv:ft,forEach:te,merge:re,extend:ht,trim:dt,stripBOM:pt},k=g;function me(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var we=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(k.isURLSearchParams(t))n=t.toString();else{var a=[];k.forEach(t,function(l,h){l===null||typeof l=="undefined"||(k.isArray(l)?h=h+"[]":l=[l],k.forEach(l,function(c){k.isDate(c)?c=c.toISOString():k.isObject(c)&&(c=JSON.stringify(c)),a.push(me(h)+"="+me(c))}))}),n=a.join("&")}if(n){var u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e},vt=g;function H(){this.handlers=[]}H.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};H.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};H.prototype.forEach=function(e){vt.forEach(this.handlers,function(i){i!==null&&e(i)})};var mt=H,wt=g,yt=function(e,t){wt.forEach(e,function(n,a){a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[a])})},ye=function(e,t,i,n,a){return e.config=t,i&&(e.code=i),e.request=n,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},bt=ye,be=function(e,t,i,n,a){var u=new Error(e);return bt(u,t,i,n,a)},_t=be,Et=function(e,t,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(_t("Request failed with status code "+i.status,i.config,null,i.request,i))},M=g,gt=M.isStandardBrowserEnv()?function(){return{write:function(t,i,n,a,u,o){var l=[];l.push(t+"="+encodeURIComponent(i)),M.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),M.isString(a)&&l.push("path="+a),M.isString(u)&&l.push("domain="+u),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),St=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Ct=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},At=St,xt=Ct,Ot=function(e,t){return e&&!At(t)?xt(e,t):t},ne=g,Rt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Pt=function(e){var t={},i,n,a;return e&&ne.forEach(e.split(`
`),function(o){if(a=o.indexOf(":"),i=ne.trim(o.substr(0,a)).toLowerCase(),n=ne.trim(o.substr(a+1)),i){if(t[i]&&Rt.indexOf(i)>=0)return;i==="set-cookie"?t[i]=(t[i]?t[i]:[]).concat([n]):t[i]=t[i]?t[i]+", "+n:n}}),t},_e=g,$t=_e.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function n(a){var u=a;return e&&(t.setAttribute("href",u),u=t.href),t.setAttribute("href",u),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=n(window.location.href),function(u){var o=_e.isString(u)?n(u):u;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function ie(r){this.message=r}ie.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ie.prototype.__CANCEL__=!0;var J=ie,W=g,Ut=Et,Nt=gt,Tt=we,qt=Ot,kt=Pt,Bt=$t,ae=be,Lt=V,jt=J,Ee=function(e){return new Promise(function(i,n){var a=e.data,u=e.headers,o=e.responseType,l;function h(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}W.isFormData(a)&&delete u["Content-Type"];var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.Authorization="Basic "+btoa(c+":"+p)}var d=qt(e.baseURL,e.url);s.open(e.method.toUpperCase(),Tt(d,e.params,e.paramsSerializer),!0),s.timeout=e.timeout;function C(){if(!!s){var f="getAllResponseHeaders"in s?kt(s.getAllResponseHeaders()):null,b=!o||o==="text"||o==="json"?s.responseText:s.response,m={data:b,status:s.status,statusText:s.statusText,headers:f,config:e,request:s};Ut(function(_){i(_),h()},function(_){n(_),h()},m),s=null}}if("onloadend"in s?s.onloadend=C:s.onreadystatechange=function(){!s||s.readyState!==4||s.status===0&&!(s.responseURL&&s.responseURL.indexOf("file:")===0)||setTimeout(C)},s.onabort=function(){!s||(n(ae("Request aborted",e,"ECONNABORTED",s)),s=null)},s.onerror=function(){n(ae("Network Error",e,null,s)),s=null},s.ontimeout=function(){var b=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",m=e.transitional||Lt.transitional;e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),n(ae(b,e,m.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",s)),s=null},W.isStandardBrowserEnv()){var U=(e.withCredentials||Bt(d))&&e.xsrfCookieName?Nt.read(e.xsrfCookieName):void 0;U&&(u[e.xsrfHeaderName]=U)}"setRequestHeader"in s&&W.forEach(u,function(b,m){typeof a=="undefined"&&m.toLowerCase()==="content-type"?delete u[m]:s.setRequestHeader(m,b)}),W.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&o!=="json"&&(s.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&s.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(f){!s||(n(!f||f&&f.type?new jt("canceled"):f),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),a||(a=null),s.send(a)})},y=g,ge=yt,Dt=ye,Ft={"Content-Type":"application/x-www-form-urlencoded"};function Se(r,e){!y.isUndefined(r)&&y.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function It(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=Ee),r}function Ht(r,e,t){if(y.isString(r))try{return(e||JSON.parse)(r),y.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(r)}var z={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:It(),transformRequest:[function(e,t){return ge(t,"Accept"),ge(t,"Content-Type"),y.isFormData(e)||y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e)?e:y.isArrayBufferView(e)?e.buffer:y.isURLSearchParams(e)?(Se(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):y.isObject(e)||t&&t["Content-Type"]==="application/json"?(Se(t,"application/json"),Ht(e)):e}],transformResponse:[function(e){var t=this.transitional||z.transitional,i=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||n&&y.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?Dt(u,this,"E_JSON_PARSE"):u}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};y.forEach(["delete","get","head"],function(e){z.headers[e]={}});y.forEach(["post","put","patch"],function(e){z.headers[e]=y.merge(Ft)});var V=z,Mt=g,Jt=V,Wt=function(e,t,i){var n=this||Jt;return Mt.forEach(i,function(u){e=u.call(n,e,t)}),e},Ce=function(e){return!!(e&&e.__CANCEL__)},Ae=g,se=Wt,zt=Ce,Vt=V,Xt=J;function oe(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Xt("canceled")}var Yt=function(e){oe(e),e.headers=e.headers||{},e.data=se.call(e,e.data,e.headers,e.transformRequest),e.headers=Ae.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ae.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var t=e.adapter||Vt.adapter;return t(e).then(function(n){return oe(e),n.data=se.call(e,n.data,n.headers,e.transformResponse),n},function(n){return zt(n)||(oe(e),n&&n.response&&(n.response.data=se.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},S=g,xe=function(e,t){t=t||{};var i={};function n(s,c){return S.isPlainObject(s)&&S.isPlainObject(c)?S.merge(s,c):S.isPlainObject(c)?S.merge({},c):S.isArray(c)?c.slice():c}function a(s){if(S.isUndefined(t[s])){if(!S.isUndefined(e[s]))return n(void 0,e[s])}else return n(e[s],t[s])}function u(s){if(!S.isUndefined(t[s]))return n(void 0,t[s])}function o(s){if(S.isUndefined(t[s])){if(!S.isUndefined(e[s]))return n(void 0,e[s])}else return n(void 0,t[s])}function l(s){if(s in t)return n(e[s],t[s]);if(s in e)return n(void 0,e[s])}var h={url:u,method:u,data:u,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return S.forEach(Object.keys(e).concat(Object.keys(t)),function(c){var p=h[c]||a,d=p(c);S.isUndefined(d)&&p!==l||(i[c]=d)}),i},Oe={version:"0.25.0"},Kt=Oe.version,ue={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){ue[r]=function(i){return typeof i===r||"a"+(e<1?"n ":" ")+r}});var Re={};ue.transitional=function(e,t,i){function n(a,u){return"[Axios v"+Kt+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return function(a,u,o){if(e===!1)throw new Error(n(u," has been removed"+(t?" in "+t:"")));return t&&!Re[u]&&(Re[u]=!0,console.warn(n(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,o):!0}};function Gt(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var i=Object.keys(r),n=i.length;n-- >0;){var a=i[n],u=e[a];if(u){var o=r[a],l=o===void 0||u(o,a,r);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(t!==!0)throw Error("Unknown option "+a)}}var Qt={assertOptions:Gt,validators:ue},Pe=g,Zt=we,$e=mt,Ue=Yt,X=xe,Ne=Qt,B=Ne.validators;function D(r){this.defaults=r,this.interceptors={request:new $e,response:new $e}}D.prototype.request=function(e,t){if(typeof e=="string"?(t=t||{},t.url=e):t=e||{},!t.url)throw new Error("Provided config url is not valid");t=X(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&Ne.assertOptions(i,{silentJSONParsing:B.transitional(B.boolean),forcedJSONParsing:B.transitional(B.boolean),clarifyTimeoutError:B.transitional(B.boolean)},!1);var n=[],a=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(a=a&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var u=[];this.interceptors.response.forEach(function(d){u.push(d.fulfilled,d.rejected)});var o;if(!a){var l=[Ue,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(u),o=Promise.resolve(t);l.length;)o=o.then(l.shift(),l.shift());return o}for(var h=t;n.length;){var s=n.shift(),c=n.shift();try{h=s(h)}catch(p){c(p);break}}try{o=Ue(h)}catch(p){return Promise.reject(p)}for(;u.length;)o=o.then(u.shift(),u.shift());return o};D.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=X(this.defaults,e),Zt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Pe.forEach(["delete","get","head","options"],function(e){D.prototype[e]=function(t,i){return this.request(X(i||{},{method:e,url:t,data:(i||{}).data}))}});Pe.forEach(["post","put","patch"],function(e){D.prototype[e]=function(t,i,n){return this.request(X(n||{},{method:e,url:t,data:i}))}});var er=D,tr=J;function L(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var t=this;this.promise.then(function(i){if(!!t._listeners){var n,a=t._listeners.length;for(n=0;n<a;n++)t._listeners[n](i);t._listeners=null}}),this.promise.then=function(i){var n,a=new Promise(function(u){t.subscribe(u),n=u}).then(i);return a.cancel=function(){t.unsubscribe(n)},a},r(function(n){t.reason||(t.reason=new tr(n),e(t.reason))})}L.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};L.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};L.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};L.source=function(){var e,t=new L(function(n){e=n});return{token:t,cancel:e}};var rr=L,nr=function(e){return function(i){return e.apply(null,i)}},ir=g,ar=function(e){return ir.isObject(e)&&e.isAxiosError===!0},Te=g,sr=fe,Y=er,or=xe,ur=V;function qe(r){var e=new Y(r),t=sr(Y.prototype.request,e);return Te.extend(t,Y.prototype,e),Te.extend(t,e),t.create=function(n){return qe(or(r,n))},t}var x=qe(ur);x.Axios=Y;x.Cancel=J;x.CancelToken=rr;x.isCancel=Ce;x.VERSION=Oe.version;x.all=function(e){return Promise.all(e)};x.spread=nr;x.isAxiosError=ar;Q.exports=x;Q.exports.default=x;var lr=Q.exports;const cr={key:0},dr={key:1},fr=R(" Processing video... "),hr={key:2},pr=P("div",{class:"el-upload__text"},[R(" Drop file here or "),P("em",null,"click to upload")],-1),vr=P("div",{class:"el-upload__tip"}," video files with a size less than 500kb ",-1),mr=R(" Upload "),wr=R(" Preview "),yr=P("div",{id:"videoPreviewDiv"},null,-1),br=G({setup(r){const e=q(),t=q(""),i=q(0),n=q(0),a=q(!1),u=q(!1);let o,l,h;le(()=>{l=document.getElementById("videoPreviewDiv"),window.onresize=function(){o&&(o.width=window.innerWidth/3,o.height=o.width*o.videoHeight/o.videoWidth)}});async function s(){a.value=!0;const f=new FormData;f.set("video",h,`${i.value}.${h.name.split(".").pop()}`);const m=await(await lr({url:`${de.API_HOST}/upload`,data:f,method:"post",onUploadProgress:function(w){const _=w.loaded/w.total*100|0;n.value=_,_===100&&(a.value=!1,u.value=!0)}})).data;console.log("result: ",m)}function c(){if(l.children.length>0){l.children[0].remove();return}o=document.createElement("video"),o.src=t.value,o.controls=!0,o.onloadeddata=()=>{o.width=window.innerWidth/3,o.height=o.width*o.videoHeight/o.videoWidth,l.append(o)}}const p=f=>{var b,m;(b=e.value)==null||b.clearFiles(),(m=e.value)==null||m.handleStart(f[0])},d=()=>{var f;(f=e.value)==null||f.submit()},C=(f,b)=>{console.log("success"),u.value=!1};function U(f,b){l.children.length>0&&(URL.revokeObjectURL(o.src),l.children[0].remove()),h=f.raw,i.value=h.uid,t.value=URL.createObjectURL(h)}return(f,b)=>{const m=He,w=Me,_=Je,j=ce;return N(),T("div",null,[P("div",null,[E(_,{ref_key:"upload",ref:e,accept:"video/*",class:"upload-demo",drag:"",limit:1,"on-exceed":p,"on-success":C,"on-change":U,"auto-upload":!1,"http-request":s,action:"#"},{default:A(()=>[a.value?(N(),T("div",cr,[E(m,{type:"circle",percentage:n.value,indeterminate:u.value},null,8,["percentage","indeterminate"])])):u.value?(N(),T("div",dr,[E(m,{type:"line",percentage:50,indeterminate:!0,"stroke-width":20,duration:5},{default:A(()=>[fr]),_:1})])):(N(),T("div",hr,[E(w,{class:"el-icon--upload"},{default:A(()=>[E(We(ze))]),_:1}),pr]))]),_:1},512),vr,E(j,{type:"primary",round:"",onClick:d},{default:A(()=>[mr]),_:1}),E(j,{type:"primary",round:"",onClick:c},{default:A(()=>[wr]),_:1}),E(Ze,{"video-src":t.value,"video-uid":i.value},null,8,["video-src","video-uid"])]),yr])}}}),Er=G({setup(r){return(e,t)=>(N(),T("div",null,[E(br)]))}});export{Er as default};
